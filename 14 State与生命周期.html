<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <script src="https://cdn.staticfile.org/react/16.4.0/umd/react.development.js"></script>
  <!--react.development开发版本-->
  <script src="https://cdn.staticfile.org/react-dom/16.4.0/umd/react-dom.development.js"></script>
  <!--react-dom.development 开发版本，有错误提示-->
  <script src="https://cdn.staticfile.org/babel-standalone/6.26.0/babel.min.js"></script>
  <!--babel 稳定、压缩版本-->
</head>

<body>
  <div id="root"></div>
  <script type="text/babel">
    class Clock extends React.Component{
      constructor(props){
        super(props);
        this.state = {
          date:new Date()
        };
      }

      componentDidMount(){
        this.timerID = setInterval(() =>this.tick(), 1000);
      }

      componentWillUnmount() {
        clearInterval(this.timerID);
      }

      tick(){
        this.setState({
          date:new Date()
        })
      }

      render() {
        return (
          <div>
            <h1>Hello, world!</h1>
            <h2>现在时间是：{this.state.date.toLocaleTimeString()}</h2>
          </div>
        )
      }
    }
    ReactDOM.render(
      <Clock />,
      document.getElementById('root')
    )
  </script>
</body>
  <!-- 
    在具有许多组件的应用程序中，在  销毁时释放组件所占用的资源  非常重要。
    每当 Clock 组件第一次加载到 DOM 中的时候，我们都想生成定时器，这在 React 中被称为挂载。 componentDidMount() 
    同样，每当 Clock 生成的这个 DOM 被移除的时候，我们也会想要清除定时器，这在 React 中被称为卸载。  componentWillUnmount()
    我们可以在组件类上声明特殊的方法，当组件挂载或卸载时，来运行一些代码，即是组件的生命周期钩子。
-->
</html>